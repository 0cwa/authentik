version: v2
meta:
  author: test
  version_constraints:
    authentik: 2022.1.1
  verified: true
inputs:
  - id: username
    label: Username
    type: text
    required: true
    validators:
      - authentik:username
resources:
  - model_name: authentik_core.user
    filters:
      # list of key: value which are passed to .filter()
      - type: query
        attribute: attributes__foo
        value: bar
        children: []
    # id: abc to reference internally
    with:
      username: {{ inputs.username }}
      name: bar
      attributes:
        foo: bar
