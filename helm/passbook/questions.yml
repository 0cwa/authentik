---
categories:
  - Authentication
  - SSO
questions:
  - default: "true"
    variable: config.error_reporting
    type: boolean
    description: "Enable error-reporting to sentry.services.beryju.org"
    group: "passbook Configuration"
    label: "Error Reporting"
    ####################################################################
    ### PostgreSQL
    ####################################################################
  - variable: postgresql.enabled
    default: true
    description: "Deploy a database server as part of this deployment, or set to false and configure an external database connection."
    type: boolean
    required: true
    label: Install PostgreSQL
    show_subquestion_if: true
    group: "Database Settings"
    subquestions:
      - variable: postgresql.postgresqlDatabase
        default: "passbook"
        description: "Database name to create"
        type: string
        label: PostgreSQL Database
      - variable: postgresql.postgresqlUsername
        default: "passbook"
        description: "Database user to create"
        type: string
        label: PostgreSQL User
      - variable: postgresql.postgresqlPassword
        default: ""
        description: "password will be auto-generated if not specified"
        type: password
        label: PostgreSQL Password
  - variable: externalDatabase.host
    default: ""
    description: "Host of the external database"
    type: string
    label: External Database Host
    show_if: "postgresql.enabled=false"
    group: "Database Settings"
  - variable: externalDatabase.user
    default: ""
    description: "Existing username in the external DB"
    type: string
    label: External Database username
    show_if: "postgresql.enabled=false"
    group: "Database Settings"
  - variable: externalDatabase.password
    default: ""
    description: "External database password"
    type: password
    label: External Database password
    show_if: "postgresql.enabled=false"
    group: "Database Settings"
  - variable: externalDatabase.database
    default: ""
    description: "Name of the existing database"
    type: string
    label: External Database
    show_if: "postgresql.enabled=false"
    group: "Database Settings"
  - variable: externalDatabase.port
    default: "3306"
    description: "External database port number"
    type: string
    label: External Database Port
    show_if: "postgresql.enabled=false"
    group: "Database Settings"
  - variable: postgresql.persistence.enabled
    default: false
    description: "Enable persistent volume for PostgreSQL"
    type: boolean
    required: true
    label: PostgreSQL Persistent Volume Enabled
    show_if: "postgresql.enabled=true"
    show_subquestion_if: true
    group: "Database Settings"
    subquestions:
      - variable: postgresql.master.persistence.size
        default: "8Gi"
        description: "PostgreSQL Persistent Volume Size"
        type: string
        label: PostgreSQL Volume Size
      - variable: postgresql.master.persistence.storageClass
        default: ""
        description: "If undefined or null, uses the default StorageClass. Default to null"
        type: storageclass
        label: Default StorageClass for PostgreSQL
      - variable: postgresql.master.persistence.existingClaim
        default: ""
        description: "If not empty, uses the specified existing PVC instead of creating new one"
        type: string
        label: Existing Persistent Volume Claim for PostgreSQL
